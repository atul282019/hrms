<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Bulk Employee</title>

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

	<link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/sb-admin-2.min.css" rel="stylesheet">

    <!-- Custom styles for this page -->
    <link href="vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">

	<link rel="stylesheet" type="text/css" href="css/slick/slick.css" />
	<link rel="stylesheet" type="text/css" href="css/slick/slick-theme.css" />

	    <link rel="stylesheet" href="css/custom.css">

</head>

<body id="page-top"  >
	<!-- onload="getLinkedBankDetail(),getVoucherSummaryList(), getPrimaryBankDetail(),getTotalVoucherCount()"-->

    <!-- Page Wrapper -->
    <div id="wrapper">

		<!-- Sidebar -->
		    <div th:insert="fragments/sidenav.html :: sidevav"></div>
       <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar -->
                <nav class="navbar navbar-expand navbar-light bg-white topbar static-top">

                    <!-- Topbar Navbar -->
                    <ul class="navbar-nav top-nav">

                        <!-- Nav Item - User Information -->
                      <!--  <li class="nav-item">
                            <a class="nav-link active" href="#">
                                <span class="mr-2 small">Dashboard</span>
                                <i class="fas fa-ellipsis-v fa-sm fa-fw"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <span class="mr-2 small">Vehicle Management</span>
                                <i class="fas fa-ellipsis-v fa-sm fa-fw"></i>
                            </a>
                        </li>-->

                    </ul>
					<!-- Right Icons + Profile -->
								    <ul class="navbar-nav d-flex flex-row align-items-center mb-0">
								      <!-- Wallet Icon -->
								     <!-- <li class="nav-item mr-3">
								        <a href="/settings/wallet" role="button">
								          <img src="img/Wallet-icon.png" alt="Wallet" class="nav-icon-img" >
								        </a>
								      </li>-->
									  <li class="nav-item mr-3">
					  			        <a href="/cotowallet" role="button">
					  			          <img src="img/Wallet-icon.png" alt="Wallet" class="nav-icon-img" >
					  			        </a>
					  			      </li>
								      <!-- Notification Icon -->
								      <li class="nav-item mr-3">
								        <a href="#" role="button">
								          <img src="img/Notification-icon.png" alt="Notification" class="nav-icon-img">
								        </a>
								      </li>

								      <!-- Profile Dropdown -->
								      <li class="nav-item dropdown no-arrow">
								        <a class="nav-link dropdown-toggle p-0" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								          <img class="img-profile rounded-circle" src="img/undraw_profile.svg" alt="User" style="width: 32px; height: 32px;">
								        </a>
								        <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
								          <a class="dropdown-item" href="/ProfileInfo">
								            <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i> Profile
								          </a>
								       <!--   <a class="dropdown-item" href="#">
								            <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i> Settings
								          </a>-->
								          <div class="dropdown-divider"></div>
								          <a class="dropdown-item" href="/logout">
								            <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i> Logout
								          </a>
								        </div>
								      </li>
								    </ul>
                </nav>




                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid p-0 p-md-1">

                  <!--  
                    <div class="row">
                        <div class="col-12">
                            <div class="tab-content">
                                <div class="upi-voucher-wrap">
                                    <div class="d-flex justify-content-center align-items-center">
                                        <h3 class="mb-0">Bulk add Vehicles </h3>
                                    </div>
                                    <div class="col-12 col-md-8 mx-auto">
                                        <div class="breadcrumb-wrap">
                                            <div class="breadcrumb-in active" id="tab1">
                                                <span>1</span>
                                                <label>Select Vouchers</label>
                                            </div>
                                            <div class="breadcrumb-in" id="tab2">
                                                <span>2</span>
                                                <label>Enter Details</label>
                                            </div>
                                            <div class="breadcrumb-in" id="tab3">
                                                <span>3</span>
                                                <label>Issue Vouchers</label>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
-->

                    <div class="row BulkVoucherIssuance-wrap" id="BulkVoucherIssuance-wrap">
                        <div class="col-12">
                            <div class="ml-2 p-3">
                                <div class="row organisation-wrap">
                                    <h3 class="mb-1">Bulk add employees and contractors</h3>
                                </div>
                            </div>
							<form action="" id="empdetailForm" name="empdetailForm" method="Post" enctype="multipart/form-data">
                            <div class="mt-1 ml-2 p-3 bulk-wrap">
                                <div class="row">
                                    <div class="bg-white py-3 px-2 mb-3 w-100 br-10">
                                        <div class="col-12 col-md-10">
                                            <div class="d-flex align-items-center mb-4">	
                                                  <a class="btn btn-outline-green ml-0" th:href="@{/bulkUserTemplate}" >Download Template</a>
                                                <p class="mb-0">Last updated on <span th:text="${session.formattedDate}" ></span></p>
                                            </div>

											<ul class="bulk-list">
                                               <li><span>1.</span>Please download our template.</li>
                                               <li><span>2.</span>Edit this file in excel, and add all your employees/contractors.</li>
                                               <li><span>3.</span>Save and upload this file below. Any other file will be rejected.</li>
                                               <li><span>4.</span>Salary updates performed here will be effective from 1st of the current month, to add a custom effective date please use <a href="#">multiple salary revision.</a></li>
                                           </ul>
                                        </div>
                                    </div>

                                    <div class="bg-white py-3 px-2 mb-3 w-100 br-10">
                                        <div class="col-12 col-md-12">
											<h5>Template file instructions</h5>
                                            <ul class="bulk-list">
                                                <li><span>1.</span>There are two tabs. Please fill in the data accordingly.</li>
                                                <li><span>2.</span>Please do not add/remove columns.</li>
                                                <li><span>3.</span>If there is no data for a particular cell, leave it empty. Don’t enter “-”, “NA” etc.</li>
                                                <li><span>4.</span>Please do not use all capital letters in address, name, title etc.</li>
                                            </ul>
											
                                            <div class="form-group choose-file" style="max-width: 600px;">
                                                <div class="input-group">
                                                  <input type="text" class="form-control" readonly>                                                  
                                                    <div class="input-group-btn">
                                                        <span class="fileUpload">
                                                            <span class="upl" id="upload">Choose file</span>
															    <input type="file" class="upload up" id="up" name="up" 
																accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" 
																onchange="convertImageToBase64()"> 
                                                            </span>
                                                    </div>
                                                 </div>
												
                                            </div> 
											<div class="error-msg" id="fileInputError" style="color:red"></div>	                                          
                                            <div class="clearfix"></div>
<!--
                                            <div class="form-group mt-3">
                                                <div class="custom-control custom-checkbox small">
                                                    <input type="checkbox" class="custom-control-input" id="customCheck44">
                                                    <label class="custom-control-label text-left" for="customCheck44">Send welcome emails to new additions </label>
                                                </div>
                                            </div>-->
                                        </div>
                                    </div>
									<input type="hidden" class="form-input" id="employerId" name="employerId" th:value="${session.id}"> 
																		
									<input type="hidden" class="form-input" id="employerName" name="employerName" th:value="${session.username}"> 
									<input type="hidden" class="form-input" id="employerMobile" name="employerMobile" th:value="${session.mobile}">
									
									<input type="hidden" class="form-input" id="voucherId" name="voucherId"> 
									<input type="hidden" class="form-input" id="voucherCode" name="voucherCode"> 
									<input type="hidden" class="form-input" id="voucherType" name="voucherType"> 
									<input type="hidden" class="form-input" id="voucherSubType" name="voucherSubType"> 
									<input type="hidden" class="form-input" id="voucherDesc" name="voucherDesc"> 
									<input type="hidden" class="form-input" id="purposeCode" name="purposeCode"> 
									<input type="hidden" class="form-input" id="activeStatus" name="activeStatus"> 
									<input type="hidden" class="form-input" id="createdby" name="createdby"> 
									
									
									<input type="hidden" class="form-input" id="bankName" name="bankName"> 
									<input type="hidden" class="form-input" id="bankCode" name="bankCode"> 
									<input type="hidden" class="form-input" id="accountHolderName" name="accountHolderName"> 
									<input type="hidden" class="form-input" id="acNumber" name="acNumber">
									<input type="hidden" class="form-input" id="accountType" name="accountType"> 
									<input type="hidden" class="form-input" id="ifsc" name="ifsc">
									
									<input type="hidden" class="form-input" id="erupiFlag" name="erupiFlag"> 
									<input type="hidden" class="form-input" id="branchCode" name="branchCode"> 
									<input type="hidden" class="form-input" id="authStatus" name="authStatus">
									
									<input type="hidden" class="form-input" id="authResponse" name="authResponse">
									<input type="hidden" class="form-input" id="banklinkedMobile" name="mobile"> 
									<input type="hidden" class="form-input" id="accstatus" name="accstatus"> 
									
									<input type="hidden" class="form-input" id="orgId" name="orgId"> 
									<input type="hidden" class="form-input" id="orgCode" name="orgCode"> 
									<input type="hidden" class="form-input" id="tid" name="tid"> 
									<input type="hidden" class="form-input" id="merchentIid" name="merchentIid"> 
									<input type="hidden" class="form-input" id="mcc" name="mcc"> 
									<input type="hidden" class="form-input" id="submurchentid" name="submurchentid"> 
									<input type="hidden" class="form-input" id="merchentid" name="merchentid">
									<input type="hidden" class="form-input" id="payerva" name="payerva"> 
									<input type="hidden" class="form-input" id="base64Output" name="base64Output"> 
									<input type="hidden" class="form-input" id="fileName" name="fileName"> 
									<input type="hidden" class="form-input" id="empIds" name="empIds">
									
																		
								   <div class="clearfix"></div>
										<div class="error-msg" id="payervaError" style="color:red"></div>
										<div class="clearfix"></div>
										<div id="otmsgdiv" style="display:none" class="alert alert-success text-center">
							            	<div id="otsuccmsg"></div>   
							            </div>
							            <div id="otfailmsgDiv" style="display:none" class="alert alert-danger text-center">
							            	<div id="otfailmsg"></div>
							        </div>	
																					
																												
                                    <div class="w-100 my-3 text-left">
                                        <a class="btn btn-border-primary btn-lg w-16" 
										th:href="@{/manageEmployee}">Back</a>
										<!-- @{/createUpiVoucherIssuance}-->	
										<input type="button" class="btn btn-primary btn-lg" id="bulksubmit" onclick="saveBulkEmpUpload()" value="Upload & Continue" disabled> </input>
										
									 <!-- Trigger button for Bootstrap 4 
									 <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#Vehicleloading">
									   Upload & Continue
									 </button>-->

                                    </div>
                                                    
                                </div>                                

                            </div>
							</form>
                        </div>
                    </div>
					
					

                    <div class="row BulkVoucherIssuanceTable" id="BulkVoucherIssuanceTable" style="display: none;">
                        <div class="col-12 col-md-12">
                            <div class="mt-4 ml-2 p-3">
                                <div class="successful-wrap">
                                    <h2 class="mb-1 text-green">Successful Upload <div class="count"><span id="success"></span><strong id="successTotal"></strong></div></h2>
                                    <div class="alert alert-sucess">
                                        View/Edit Details and Confirm Upload 
                                    </div>

                                    <div class="table-responsive">
                                        <table class="table table-sucess table-bordered" id="successUpload">
                                            <thead>
                                                <tr>
                                                    <!--<th>Redemtion Type</th>-->
                                                    <th>Id</th>
                                                    <th>UserType</th>
                                                    <th>Name</th>
                                                    <th>Mobile</th>
                                                    
                                                   
                                                </tr>
                                            </thead>
                                            <tbody>
                                               
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="text-right my-3">
                                        <button class="btn btn-outline-reject"onclick="window.location.href='/bulkempUpload'">Cancel</button>
                                        <button class="btn btn-confirm" id="continueButton" onclick="createBulkemp()" disabled>Continue
											<!--<a class="text-white" style="text-decoration: none;" onclick="nextTab()" >Continue</a>-->
											</button>
                                    </div>
                                </div>

                                <div class="unsuccessful-wrap">
                                    <h2 class="mb-1 text-green">Unsuccessful Upload <div class="count"><span id="failed"></span><strong id="failedTotal"></strong></div></h2>
                                    <div class="alert alert-unsucess">
                                       Download Unsuccessful Upload  to try again 
                                    </div>

                                    <div class="table-responsive">
                                        <table class="table table-unsucess" cellspacing="0" cellpadding="0" id="failedUpload">
                                            <thead>
                                                <tr>
													<!--<th>Redemtion Type</th>-->
													<th>Id</th>
                                                   <th>UserType</th>
                                                   <th>Name</th>
                                                   <th>Mobile</th>
												   <th>Reason</th>
                                                
                                                </tr>
                                            </thead>
                                            <tbody>
                                                                
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="text-right my-3">
										<!--<button class="btn btn-outline-download" id="downloadBtn" data-toggle="modal" data-target="#ModalDownload1">Download</button>-->
										<button class="btn btn-outline-download" onclick="ExportToExcel('xlsx')" data-toggle="modal" data-target="#ModalDownload1">Download</button>
                                       
                                    </div>
                                </div>

                            </div>


                        </div>
                    </div>
					<div class="tab-content" id="selectvouchers-wrap-issue" style="display: none;">
                               <div class="selectvouchers-update">
                                   <p>Last updated on</p>
                                   <span th:text="${session.formattedDate}" ></span>
                               </div>
                              <!-- <div class="selectvouchers-top">
                                   <div class="selectvouchers-topleft">
                                       <div class="selectvouchers-topleft-cards d-flex" >
                                           <div id="jsonDataBank"></div>
                                       </div>
                                 
                                   </div>
                                   <div class="selectvouchers-topright">
                                       <div class="selectvouchers-carosel" id="jsonData">
                                       </div>
                                   </div>
                               </div>-->
								<div class="selectvouchers-top">
                               <div class="selectvouchers-topleft">
                                   <div class="selectvouchers-topleft-cards">
                                     <!--  <div class="selectvouchers-topleft-cardsdiv">
                                           <div class="INDIANB-NS-wrapper"><img class="INDIANB-NS" 
											src="img/indianbank.png" width="16px"></div>
                                           <div class="text-wrapper">Indian Bank</div>
                                           <div class="xxxx">xxxx3456</div>
                                           <img class="dropdown" src="img/arrowdown.svg" width="16px">
                                       </div>-->
									   <select class="GeneralSelect" id="banklist" onchange="getBankDetailByBankAccountNumber();showLinkedAccAmount(this.value)">
										 <option value="" class="test">Select Bank</option>
	                                     </select>

                                       <div class="div-2">
                                           <div class="text-wrapper-2">Available Balance</div>
                                           <p class="element"><span class="span">₹</span> <span
                                                   class="text-wrapper-3">0,00,000</span></p>
                                           <img class="recall" id="recallBalance"src="img/recall.svg">
                                       </div>
                                       <p class="last-updated-on">Last Updated on <span th:text="${session.formattedDate}" ></span></p>

                                   </div>
                                   <div class="selectvouchers-topleft-cards selectvouchers-topleft-primary">
                                       <h5>Total Vouchers</h5>
                                       <div class="d-flex justify-content-between my-1 mb-3">
                                           <span>Number</span>
                                           <span id="totalNumber"></span>
                                       </div>
                                       <div class="d-flex justify-content-between my-1">
                                           <span>Value</span>
                                           <span id="totalValue"></span>
                                       </div>
                                   </div>
                               </div>
                               <div class="selectvouchers-topright">
                                   <div class="selectvouchers-carosel responsive-content">
                                    
									<div class="selectvouchers-carosel-cards-demo">
	                                    <div class="demo-slider" id="jsonData">
	                                    </div>
	                                </div>

                                   </div>
                               </div>
							 
                           </div>

					      <div class="upi-voucher-wrap selectvouchers-VerifyDetails" >
                           <h3>Verify Details </h3>
                           <div>
                               <p>Please cross-check the details for the issuance of vouchers.</p>
                           </div>

                           <div class="table-responsive">
                               <table class="table table-reimbursements selectvouchers-table border-btm" id="issueVoucherTable">
								<thead>
                                        <tr>
											<th></th>
											<th>Id</th>
										<!--	<th>Redemtion Type</th>-->
                                            <th>Beneficiary Name</th>
                                            <th>mobile</th>
                                            <th>amount</th>
                                            <th>startDate</th>
                                            <th>expDate</th>
											<th>Action</th>
                                        </tr>
                                    </thead>
                                   <tbody>
                                       
                                   </tbody>
                               </table>
                           </div>

						   <div class="form-group mt-3">
						       <div class="custom-control custom-checkbox small">
						           <input type="checkbox" class="custom-control-input" id="customCheck45" onchange="toggleSubmitButton()">
						           <label class="custom-control-label text-left" for="customCheck45">I confirm
						               that the details uploaded above are correct to the best of my knowledge,
						               and are approved by the competent authority in my organization.</label>
						       </div>
						   	<div class="error-msg" id="errorMessage" style="color:red"></div>
						   </div>
							
						   <div class="clearfix"></div>
						   <div id="issuemsgdiv" style="display:none" class="alert alert-success text-center">
						   	<div id="issuesuccmsg"></div>   
						   </div>
						   <div id="issuesfailmsgDiv" style="display:none" class="alert alert-danger text-center">
						   	<div id="issuesfailmsg"></div>
						   </div>		
						   						   
                           <div class="w-100 mt-3 text-right">
                               <div class="btn btn-border-primary" onclick="returnTab2()">Back</div>
								   
								   <button  class="btn btn-primary" id="submitButton" disabled>Issue Vouchers</button>
                           </div>
					  </div>
					</div>
					
					
					<div class="upi-voucher-wrap" id="upi-voucher-wrapThree" style="display: none;">
						    <div class="selectvouchers-update">
						        <p>Last updated on</p>
						        <span th:text="${session.formattedDate}" ></span>
						    </div>
						   <!-- <div class="selectvouchers-top">
						        <div class="selectvouchers-topleft">
						            <div class="selectvouchers-topleft-cards d-flex" >
						                <div id="jsonDataBank"></div>
						            </div>
						      
						        </div>
						        <div class="selectvouchers-topright">
						            <div class="selectvouchers-carosel" id="jsonData">
						            </div>
						        </div>
						    </div>-->
							<div class="selectvouchers-top">
						    <div class="selectvouchers-topleft">
						        <div class="selectvouchers-topleft-cards" id="bank-section-2">
						          <!--  <div class="selectvouchers-topleft-cardsdiv">
						                <div class="INDIANB-NS-wrapper"><img class="INDIANB-NS" 
										src="img/indianbank.png" width="16px"></div>
						                <div class="text-wrapper">Indian Bank</div>
						                <div class="xxxx">xxxx3456</div>
						                <img class="dropdown" src="img/arrowdown.svg" width="16px">
						            </div>-->
								   <select class="GeneralSelect" id="banklist2" onchange="getBankDetailByBankAccountNumber2();showLinkedAccAmount2(this.value, 'bank-section-2')">
								
						              </select>

						            <div class="div-2">
						                <div class="text-wrapper-2">Available Balance</div>
						                <p class="element"><span class="span">₹</span> <span
						                        class="text-wrapper-3" >0,00,000</span></p>
						                <img class="recall" id="recallBalance2" src="img/recall.svg">
						            </div>
						            <p class="last-updated-on">Last Updated on <span th:text="${session.formattedDate}" ></span></p>

						        </div>
						        <div class="selectvouchers-topleft-cards selectvouchers-topleft-primary">
						            <h5>Total Vouchers</h5>
						            <div class="d-flex justify-content-between my-1 mb-3">
						                <span>Number</span>
						                <span id="totalNumber2"></span>
						            </div>
						            <div class="d-flex justify-content-between my-1">
						                <span>Value</span>
						                <span id="totalValue2"></span>
						            </div>
						        </div>
						    </div>
						    <div class="selectvouchers-topright">
						        <div class="selectvouchers-carosel responsive-content">
						         
								   <div class="selectvouchers-carosel-cards">
						                 <div class="selectvouchers-carosel" id="jsonData2">
						                 </div>
						             </div>

						          
						        </div>
						    </div>
						 
						</div>
					    <div class="d-flex align-items-center justify-content-between">
					        <div>
					            <h3>Report for Voucher Issuance</h3>
					            <p>Please cross-check the details for the issuance of vouchers. </p>
					        </div>
					        <div class="rightdownload mb-3">
					            <div class="download-vc">
					                <img src="img/download-vouchers.svg" alt="">
					            </div>
					        </div>
					    </div>
					    <hr>

					    <div class="table-responsive">
					        <table class="table table-reimbursements selectvouchers-table" id="successFailVoucherTable">
					            <thead>
					                <tr>
					                    <th>Name</th>
					                    <th>Mobile Number</th>
					                    <th>Voucher Type</th>
					                    <th>Redemption Type</th>
					                    <th>Amount</th>
					                    <th>Start Date</th>
					                    <th>Validity</th>
					                    <th>Status</th>
					                    <th></th>
					                </tr>
					            </thead>
					            <tbody>
					                
					            </tbody>
					        </table>
					    </div>
					   
					    <div class="row">
					        <div class="col-12 text-right my-3">
					            <a th:href="@{/manageEmployee}" class="btn btn-primary mb-1">GO TO DASHBOARD</a>
					        </div>
					    </div>
					</div>
               </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->
        </div>
		
		
		
		<div class="lds-spinner" id="signinLoader" style="display: none">
					<div></div>
					<div></div>
					<div></div>
					<div></div>
					<div></div>
					<div></div>
					<div></div>
					<div></div>
					<div></div>
					<div></div>
					<div></div>
					<div></div>
				</div>
				
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->
	
	<!-- Modal Confirm -->
	<div class="modal fade" id="ModalBulkConfirm" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	    <div class="modal-dialog modal-dialog-centered" role="document">
	    <div class="modal-content modal-bulk">
	        <div class="modal-top text-center">          
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close" >
	            <img src="img/modal-close.svg" alt="">
	        </button>        
	        <img src="img/modal-success.svg" alt="">
	        </div>
	        <div class="modal-bottom">
	            <div class="count"><span id="correctConfirm"></span><strong id="correctTotal"></strong></div>
	            <br>
	            <span>Upload Successful</span>
	        </div>
	    </div>
	    </div>
	</div>

	<!-- Modal Reject -->
	<div class="modal fade" id="ModalBulkReject" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	    <div class="modal-dialog modal-dialog-centered" role="document">
	    <div class="modal-content modal-bulk">
	        <div class="modal-top text-center">          
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close" >
	            <img src="img/modal-close.svg" alt="">
	        </button>        
	        <img src="img/modal-reject.svg" alt="">
	        </div>
	        <div class="modal-bottom">
	            <div class="count"><span id="rejectConfirm"></span><strong id="rejectTotal"></strong></div>
	            <br>
	            <span>Upload Rejected</span>
	        </div>
	    </div>
	    </div>
	</div>

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>

    <!-- Page level plugins -->
    <script src="vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="vendor/datatables/dataTables.bootstrap4.min.js"></script>

    <!-- Page level custom scripts -->
    <script src="js/demo/datatables-demo.js"></script>
	<script src="js/xsls-export.js"></script>
	<script type="text/javascript" src="cotodel-js/bulk-emp.js"></script>

	<script type="text/javascript" src="js/slick/slick.min.js"></script>


	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/jquery.dataTables.min.css">
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<!-- Bootstrap JS (must come after jQuery) -->
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.6.0/js/bootstrap.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
	
	<script>	function ExportToExcel(type, fn, dl) {
	        var elt = document.getElementById('failedUpload');
	        var wb = XLSX.utils.table_to_book(elt, { sheet: "sheet1" });
	        return dl ?
	            XLSX.write(wb, { bookType: type, bookSST: true, type: 'base64' }) :
	            XLSX.writeFile(wb, fn || ('BulkUserTemplate.' + (type || 'xlsx')));
	    }</script>
		<script type="text/javascript">
			

	$(document).ready(function(){
		
		  $('li.active').removeClass('active').removeAttr('aria-current'); 
		  $('a[href="' +'/manageEmployee"]').closest('li').addClass('active').attr('aria-current', 'page');   
		  
	   $(".innernav").click(function(){
	       $(".dropdownNav").addClass("active");
	   });
	});

	</script>
	



	<style>
		
			@keyframes rotate360 {
			    from {
			        transform: rotate(360deg);
			    }
			    to {
			        transform: rotate(0deg);
			    }
			}

			.rotate {
			    animation: rotate360 0.6s linear; /* 0.6s for a smooth rotation */
			} </style>
			<script>	
				document.getElementById("recallBalance2").addEventListener("click", function() {
				    const recallIcon = this;
				    const selectedBankAccount = document.getElementById("banklist2").value;

				    // Add rotation class
				    recallIcon.classList.add("rotate");

				    setTimeout(() => {
				        recallIcon.classList.remove("rotate");
				    }, 600);

				    if (selectedBankAccount) {
				        showLinkedAccAmount2(selectedBankAccount, 'bank-section-2');
				    } else {
				        alert("Please select a bank account first.");
				    }
				});

				function showLinkedAccAmount2(accountNumber, sectionId) {
				    const employerId = document.getElementById("employerId").value;
				    const section = document.getElementById(sectionId);

				    console.log("Fetching balance for account:", accountNumber, "Employer ID:", employerId);

				    $.ajax({
				        type: "POST",
				        url: "/showLinkedAccAmount",
				        data: {
				            "acNumber": accountNumber,
				            "orgId": employerId
				        },
				        success: function(response) {
				            let obj = typeof response === "string" ? JSON.parse(response) : response;

				            if (obj.status) {
				                // Update balance within the correct section
				                section.querySelector(".text-wrapper-3").textContent = obj.balance || "Amount Not Available";

				                // Update timestamp
				                if (obj.timestamp) {
				                    section.querySelector(".last-updated-on span").textContent = formatTimestamp(obj.timestamp);
				                }
				            } else {
				                alert("Failed to fetch balance.");
				            }
				        },
				        error: function(error) {
				            console.error("Error fetching balance:", error);
				            alert('Error fetching balance.');
				        }
				    });
				}



		</script>
	<style>	@keyframes rotate360 {
			    from {
			        transform: rotate(360deg);
			    }
			    to {
			        transform: rotate(0deg);
			    }
			}

			.rotate {
			    animation: rotate360 0.6s linear; /* 0.6s for a smooth rotation */
			} </style>
			<script>/*				document.getElementById("recallBalance").addEventListener("click", function() {
			    var recallIcon = this;
			    var selectedBankAccount = document.getElementById("banklist").value;

			    // Add rotation class
			    recallIcon.classList.add("rotate");

			    // Remove rotation class after animation completes
			    setTimeout(() => {
			        recallIcon.classList.remove("rotate");
			    }, 600);

			    // Validate selection
			    if (selectedBankAccount) {
			        showLinkedAccAmount(selectedBankAccount);
			    } else {
			        alert("Please select a bank account first.");
			    }
			});

			function showLinkedAccAmount(accountNumber) {
			    var employerid = document.getElementById("employerId").value;
			    console.log("Fetching balance for account:", accountNumber, "Employer ID:", employerid);

			    $.ajax({
			        type: "POST",
			        url: "/showLinkedAccAmount",
			        data: {
			            "acNumber": accountNumber,
			            "orgId": employerid
			        },
			        success: function(response) {
			            console.log("API Response:", response);

			            let obj = typeof response === "string" ? JSON.parse(response) : response;

			            if (obj.status) {
			                // Update balance
			                document.querySelector(".text-wrapper-3").textContent = obj.balance || "Amount Not Available";

			                // Update timestamp
			                if (obj.timestamp) {
			                    document.querySelector(".last-updated-on span").textContent = formatTimestamp(obj.timestamp);
			                }
			            } else {
			                alert("Failed to fetch balance.");
			            }
			        },
			        error: function(error) {
			            console.error("Error fetching balance:", error);
			            alert('Error fetching balance.');
			        }
			    });
			}*/

			function formatTimestamp(timestamp) {
			    let dateObj = new Date(timestamp.replace(" ", "T"));

			    let hours = dateObj.getHours().toString().padStart(2, '0'); 
			    let minutes = dateObj.getMinutes().toString().padStart(2, '0');
			    let seconds = dateObj.getSeconds().toString().padStart(2, '0');

			    let day = dateObj.getDate();
			    let month = dateObj.toLocaleString('en-US', { month: 'short' });
			    let year = dateObj.getFullYear();
			    let weekday = dateObj.toLocaleString('en-US', { weekday: 'short' });

			    return `${hours}:${minutes}:${seconds} ${weekday} ${day} ${month} ${year}`;
			}


		</script>
		<!-- Updated Add Vehicle Modal to match the design -->
		<div class="modal fade" id="Vehicleloading" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
		  <div class="modal-dialog modal-dialog-centered modal-approval-wrap" role="document" style="max-width: 750px;">
		    <div class="modal-content modal-bulk text-center p-4">
		      <div class="modal-body">
				<div class="car-container">
				  <img src="img/animated-car.png" alt="Car" class="car-moving speed-medium">
				</div>
		        <h5 class="vehicle-history-title" style="text-align: center;">Upload in Progress</h5><hr>

		        <div class="my-3 p-2" style="background-color: #367AFF1A; color: #4A4E69; border-radius:10px;">
		          Estimated Time: 3-4 Minutes
		        </div>

		        <p class="vehicle-date-value">Please wait as we retrieve and upload details of your Vehicles.<br>You could also go to the Dashboard, and check back after some time.</p>

		        <div class="mt-4">
		          <a href="/dashboard" target="_blank" class="btn btn-outline-primary w-100 custom-blue" style= "border-color: #367AFF;">
		            Go to Dashboard
		          </a>
		        </div>
		      </div>
		    </div>
		  </div>
		</div>
			
<!-- Modal Download -->
<div class="modal fade" id="ModalDownload1" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content modal-bulk">
        <div class="modal-top text-center">          
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <img src="img/modal-close.svg" alt="">
        </button>        
        <div class="count">
			<!--<span>7</span><strong>10</strong>-->
			<span id="successUploadDownload"></span><strong id="successUploadTotal">
		</div>
            <br>
            <span>Upload Successful</span>
        </div>
        <div class="modal-bottom">
            <div class="count">
				<span id="failedUploadDownload"></span><strong id="failedUploadTotal"></strong>
			</div>
            <br>
            <span>Review Pending Unsuccessful Upload</span>
        </div>
    </div>
    </div>
</div>

<!-- Modal Issue Vouchers -->
   <!-- <div class="modal fade" id="modalissueVouchers" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">-->
		<div id="otpModal1" class="modal customfade">
        <div class="modal-dialog modal-dialog-centered modal-approval-wrap" role="document">
            <div class="modal-content modal-bulk">
                <div class="modal-header pb-0 text-center">
                    <h5 class="modal-title w-100" id="exampleModalCenterTitle">Authentication for Issuance</h5>
                </div>
                <div class="modal-body text-center">
                    <div class="otp-box-onboarding justify-content-center">
		
			        <input  class="form-control form-control-sm test" type="password" id="password1" 
					oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
			        name="password1" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
			        <input  class="form-control form-control-sm test" type="password" id="password2" 
					oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
			        name="password2" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
			        <input  class="form-control form-control-sm test" type="password" id="password3" 
					oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
			        name="password3" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
			        <input  class="form-control form-control-sm test" type="password" id="password4" 
					oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
			        name="password4" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
			        <input  class="form-control form-control-sm test" type="password" id="password5" 
					oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
			        name="password5" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
			        <input  class="form-control form-control-sm test" type="password" id="password6" 
					oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
			        name="password6" maxlength="1" autocomplete="off" onkeydown="focusBack()">
			        <input  class="form-control form-control-sm test" type="hidden" id="orderId" 
			        name="orderId" >
					
					<div class="d-flex justify-content-center mt-2">
					    <i class="fa-solid fa-eye" id="toggleOtpIcon" style="cursor: pointer;" onclick="toggleOtpVisibility()"></i>
					</div>
												
                    </div>
                   <label class="time-otp ml-0 text-dark" for="" id="countdown" style="color: green;"></label>
				  <!-- <div class="text-center" id="countdown" style="color: green;"></div>-->
					<p id="resendCode">Didn’t receive the code?  <a href="#" onclick="resendVoucherOTP()">Resend OTP</a></p>
					
					<div class="error-msg" id="otpError" style="color:red"></div>
					
					<div class="tip-wrap justify-content-center">
                        <p class="mb-0" id="maskedMobileDisplay"></p>
                    </div>
					
					
					
                    <div class="d-flex justify-content-center mt-3">
						<!--
                        <button class="btn btn-primary w-100" id="authenticatereport">Authenticate</button>
						-->
						<button class="btn btn-primary w-100" id="authenticate" onclick="verfyIssueVoucherOTP()" disabled>Authenticate</button>
                    </div>
                </div>
            </div>
        </div>
    </div>	
</body>

<!-- Modal -->
	<div id="confirmationDialog" style="display: none;">
		<div class="modal-dialog modal-dialog-centered modal-approval-wrap" role="document">
	         <div class="modal-content">
	                <div class="modal-header pb-0">
                    <h5 class="modal-title" id="">Are you sure you want to delete this beneficiary ? </h5>
                    
                </div>
	                <div class="modal-body confirmbox">
	                    <div class="d-flex justify-content-center mt-4">
							<button id="yes" onclick="confirmRevokeDialog()">Yes</button>
							<button id="no" onclick="closeDialog()">No</button>
                    </div>
	                
	            </div>
			 </div>
		</div>
	</div>
	<script>
	  $('#Vehicleloading').on('shown.bs.modal', function () {
	    $('.car-moving').addClass('car-moving');
	  });
	</script>

	<script>
	function toggleOtpVisibility() {
	    const icon = document.getElementById("toggleOtpIcon");
	    const inputs = document.querySelectorAll('.otp-box-onboarding input');

	    const isHidden = inputs[0].type === 'password';
	    inputs.forEach(input => {
	        if (input.id.startsWith('password')) {
	            input.type = isHidden ? 'text' : 'password';
	        }
	    });

	    icon.classList.toggle('fa-eye');
	    icon.classList.toggle('fa-eye-slash');
	}
	</script>
					
</html>