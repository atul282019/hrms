<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Setting-Organization-Account</title>

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/sb-admin-2.min.css" rel="stylesheet">

    <!-- Custom styles for this page -->
    <link href="vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="css/slick/slick.css" />
    <link rel="stylesheet" type="text/css" href="css/slick/slick-theme.css" />
	<script type="text/javascript" src="js/xsls-export.js"></script>
    <link rel="stylesheet" href="css/custom.css">

</head>


<body id="page-top" onload="fetchOrgDetails('GST')" >

 <div class="bs-canvas-overlay bg-dark position-fixed w-100 h-100"></div>

    <!-- Page Wrapper -->
    <div id="wrapper">

	<!-- Sidebar -->
					      
	 <div th:insert="fragments/sidenav.html :: sidevav"></div>
	
	 <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar -->
                <nav class="navbar navbar-expand navbar-light bg-white topbar static-top">

                    <!-- Topbar Navbar -->
                    <ul class="navbar-nav top-nav">

                        <!-- Nav Item - User Information -->
                      <!--  <li class="nav-item">
                            <a class="nav-link active" href="#">
                                <span class="mr-2 small">Dashboard</span>
                                <i class="fas fa-ellipsis-v fa-sm fa-fw"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <span class="mr-2 small">Employee Profile</span>
                                <i class="fas fa-ellipsis-v fa-sm fa-fw"></i>
                            </a>
                        </li>-->
                    </ul>
					<!-- Right Icons + Profile -->
								    <ul class="navbar-nav d-flex flex-row align-items-center mb-0">
								      <!-- Wallet Icon -->
								     <!-- <li class="nav-item mr-3">
								        <a href="/settings/wallet" role="button">
								          <img src="img/Wallet-icon.png" alt="Wallet" class="nav-icon-img" >
								        </a>
								      </li>-->
									  <li class="nav-item mr-3">
					  			        <a href="/cotowallet" role="button">
					  			          <img src="img/Wallet-icon.png" alt="Wallet" class="nav-icon-img" >
					  			        </a>
					  			      </li>
								      <!-- Notification Icon -->
								      <li class="nav-item mr-3">
								        <a href="#" role="button">
								          <img src="img/Notification-icon.png" alt="Notification" class="nav-icon-img">
								        </a>
								      </li>

								      <!-- Profile Dropdown -->
								      <li class="nav-item dropdown no-arrow">
								        <a class="nav-link dropdown-toggle p-0" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								          <img class="img-profile rounded-circle" src="img/undraw_profile.svg" alt="User" style="width: 32px; height: 32px;">
								        </a>
								        <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
								          <a class="dropdown-item" href="/ProfileInfo">
								            <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i> Profile
								          </a>
								       <!--   <a class="dropdown-item" href="#">
								            <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i> Settings
								          </a>-->
								          <div class="dropdown-divider"></div>
								          <a class="dropdown-item" href="/logout">
								            <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i> Logout
								          </a>
								        </div>
								      </li>
								    </ul>
                </nav>

                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid p-0 p-md-1">
                    <div class="row">
                        <div class="col-12">
							<div class="mt-4 bg-white p-3">
                            <div class="row">
                                <div class="col-12 organisation-wrap">
                                    <h3 class="mb-1 text-center">Setup your organization's account</h3>
                                    <div class="breadcrumb-wrap">
                                        <div class="breadcrumb-in active">
                                            <span>1</span>
                                            <label>Enter Organization Details</label>
                                        </div>
                                        <div id="tab2" class="breadcrumb-in">
                                            <span>2</span>
                                            <label>Confirmation of Organization Details</label>
                                        </div>
                                        <div class="breadcrumb-in" id="tab3">
                                            <span>3</span>
                                            <label>Authenticate Confirmation</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                            <div class="upi-voucher-wrap selectvouchers-bottom" id="Form1">
                                <div class="d-flex">
                                    <h3>Enter Organization Details </h3>
                                </div>
									
								<div class="d-flex">
								    <div class="form-check mr-4">
								        <input class="form-check-input" type="radio" name="orgRadio" id="gst" value="GST" onchange="fetchOrgDetails('GST'),toggleVisibility()" checked>
								        <label class="form-check-label" for="gst">GST</label>
								    </div>
								    <div class="form-check">
								        <input class="form-check-input" type="radio" name="orgRadio" id="pan" value="PAN" onchange="fetchOrgDetails('PAN'),toggleVisibility()">
								        <label class="form-check-label" for="pan">PAN</label>
								    </div>
								</div>
								<div class="col-12 col-md-6 col-lg-4 pl-0 mt-3">
								<div class="did-floating-label-content" id="gstInputContainer">
								    <input type="text" 
								           class="did-floating-input " 
								           id="gstnNo" 
								           onchange="resetErrorMessages()"
										   oninput="sanitizeInput(this),convertToUppercase(this)"
										   placeholder="Enter GST Number">
								    <label class="did-floating-label">Enter GST Number</label>
									
								</div>
								<div id="panInputContainer" class="did-floating-label-content" style="display: none;">
							    <input type="text" 
							           class="did-floating-input " 
							           id="panNo" 
							           onchange="resetErrorMessages()"
									   oninput="sanitizeInput(this),convertToUppercase(this)"
									   placeholder="Enter PAN Number">
							    <label class="did-floating-label">Enter PAN Number</label>
								
							</div>
								<div class="tip-wrap justify-content-start" >
									<img src="img/Tip.png" alt="" class="mr-2" >
                                <p class="mb-0">Save time by entering the GST for your organization and let us pre-fill the basic information. 
									In case your organization does not have a GST number, please enter the PAN.</p>
									
                            	</div>
								</div>
								<div class="error-msg" id="bankNameError" style="color: red; margin-top: -10px; font-size: 12px;"></div>
								
								
								
								<input type="hidden" class="form-input" id="employerId" name="employerId" th:value="${session.id}"> 
									
                                <div class="w-100 my-3 text-left">
                                    <button class="btn btn-border-primary custom-width-backbtn" onclick="window.location.href='/dashboard'">Back</button>
                                    <button type="button" class="btn btn-primary custom-width-contbtn" onclick="validateInput()">Continue</button>
                                </div>								
                            </div><!-- first form finished-->
							<div id="Form2" class="upi-voucher-wrap selectvouchers-bottom" style="display: none;">
							    <div class="d-flex">
							        <h3>Your Organization Details</h3>
							    </div>

							    <!-- Legal, Address and other details fields -->
							    <div class="col-12 col-md-6 col-lg-4 pl-0 mt-3">
									<div class="did-floating-label-content" id="gstInputContainer1">
									   <input type="text"  class="did-floating-input input-with-static-icon" 
									    id="gstnNo1"  onchange="resetErrorMessages()" readonly>
									    <label class="did-floating-label">Enter GST Number</label>
										
									</div>
									<div id="panInputContainer1" class="did-floating-label-content" >
								    <input type="text"   class="did-floating-input input-with-static-icon"  
									id="panNo1" onchange="resetErrorMessages()" readonly>
								    <label class="did-floating-label">Enter PAN Number</label>
									
								</div>
							        <div class="did-floating-label-content">
							            <input type="text" class="did-floating-input input-with-dynamic-icon" id="legalName"  onchange="resetErrorMessages()" oninput="addDynamicIcon(this),sanitizeInput(this)" autocomplete="off">
							            <label class="did-floating-label">Legal Name for Business</label>
										<div class="error-msg" id="LegalNameError" style="color: red; margin-top: -10px; font-size: 12px;"></div>
							        </div>
									

							        <div class="did-floating-label-content">
							            <input type="text" class="did-floating-input input-with-dynamic-icon" id="tradeName" onchange="resetErrorMessages()" oninput="addDynamicIcon(this),sanitizeInput(this)" autocomplete="off">
							            <label class="did-floating-label">Trade Name</label>
										<div class="error-msg" id="tradeNameError" style="color: red; margin-top: -10px; font-size: 12px;"></div>
							        </div>
									

							        <div class="did-floating-label-content">
							            <input type="text" class="did-floating-input input-with-dynamic-icon" id="orgType" onchange="resetErrorMessages()"  oninput="addDynamicIcon(this),sanitizeInput(this)" autocomplete="off"> 
							            <label class="did-floating-label">Organization Type</label>
										<div class="error-msg" id="orgTypeError" style="color: red; margin-top: -10px; font-size: 12px;"></div>
							        </div>
									

							        <div class="did-floating-label-content">
							            <input type="text" class="did-floating-input input-with-dynamic-icon" id="address1" onchange="resetErrorMessages()" oninput="addDynamicIcon(this),sanitizeInput(this)" autocomplete="off">
							            <label class="did-floating-label">Address Field 1</label>
										<div class="error-msg" id="address1Error" style="color: red; margin-top: -10px; font-size: 12px;"></div>
							        </div>
									

							        <div class="did-floating-label-content">
							            <input type="text" class="did-floating-input input-with-dynamic-icon" id="address2" onchange="resetErrorMessages()"  oninput="addDynamicIcon(this),sanitizeInput(this)" autocomplete="off">
							            <label class="did-floating-label">Address Field 2</label>
										<div class="error-msg" id="address2Error" style="color: red; margin-top: -10px; font-size: 12px;"></div>
							        </div>
									

							        <div class="d-flex">
							            <div class="did-floating-label-content" style="margin-right: 1rem;">
							                <input type="text" class="did-floating-input input-with-dynamic-icon" id="district" onchange="resetErrorMessages()" oninput="addDynamicIcon(this),sanitizeInput(this)" autocomplete="off">
							                <label class="did-floating-label">District Name </label>
											<div class="error-msg" id="districtError" style="color: red; margin-top: -10px; font-size: 12px;"></div>
							            </div>
										
							            <div class="did-floating-label-content">
							                <input type="text" class="did-floating-input input-with-dynamic-icon" maxlength="6"  id="Pincode" onchange="resetErrorMessages()"  oninput="addDynamicIcon(this)" autocomplete="off">
							                <label class="did-floating-label">Pincode</label>
											<div class="error-msg" id="PincodeError" style="color: red; margin-top: -10px; font-size: 12px;"></div>
							            </div>
										
							        </div>

							        <div class="did-floating-label-content">
							            <input type="text" class="did-floating-input input-with-dynamic-icon" id="state" onchange="resetErrorMessages()" oninput="addDynamicIcon(this),sanitizeInput(this)" autocomplete="off">
							            <label class="did-floating-label">State Name</label>
										<div class="error-msg" id="stateError" style="color: red; margin-top: -10px; font-size: 12px;"></div>
							        </div>
									
									<div id="status" style="color: red;"></div>
									
							        <div class="w-100 my-3 text-left">
							            <button class="btn btn-border-primary custom-width-backbtn" onclick="goBackToForm1()">Back</button>
							            <button type="button" class="btn btn-primary custom-width-contbtn" id="btnToform3"onclick="continueToForm3()" disabled>Continue</button>
							        </div>
							    </div>
							</div><!-- form 2 complete-->
						<div id="Form3" class="upi-voucher-wrap selectvouchers-bottom" style="display: none;">
							<div id="checkboxsection">
								    <div class="d-flex">
								        <h3>Authenticate Confirmation</h3>
								    </div>
		
									<div class="tip-wrap justify-content-start">
									    <!-- Checkbox for agreement -->
									    <div class="form-check">
									        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
									        <label class="form-check-label" for="flexCheckDefault">
									            <b>I agree to the following statements.</b>
									        </label>
									    <div>
									    	
									    <!-- Horizontal line before the list -->
									    <hr>
										
									    <!-- Unordered list of statements -->
										
									    <ul class="mb-0">
									        <li>I, hereby, certify that I am authorized by the competent authority of the organization concerned to register the organization.</li>
									        <li>The GST Identification Number / PAN furnished is of the organization that I have been authorized to represent.</li>
									        <li>I bear complete responsibility for the same, and would be liable for any consequences arising due to any misrepresentations or falsifications.</li>
									    </ul>
										
									</div>
									
						        	</div>
									
									</div>
									<div class="button-container w-100 my-3 ">
								            <button class="btn btn-border-primary custom-width-backbtn" id="backButton" onclick="goBackToForm2()">Back</button>
								            <button type="button" class="btn btn-primary custom-width-contbtn" id="authButton" onclick="getOTP()" disabled>Authenticate</button>
											</div>
									</div>
									               
									<div class="modal-body text-left justify-content-start" id="otpsection" style="display: none;">
										<div class="d-flex">
								        <h3>Please enter one time password to complete authentication</h3>
								    	</div>
										    <div class="otp-box-onboarding d-flex justify-content-start">
											
											<input  class="form-control form-control-sm test" id="password1" 
												oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
										        name="password1" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
										        <input  class="form-control form-control-sm test" id="password2" 
												oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
										        name="password2" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
										        <input  class="form-control form-control-sm test" id="password3" 
												oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
										        name="password3" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
										        <input  class="form-control form-control-sm test" id="password4" 
												oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
										        name="password4" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
										        <input  class="form-control form-control-sm test"  id="password5" 
												oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
										        name="password5" maxlength="1" autocomplete="off" onkeypress="focusNext(this)" onkeydown="focusBack()">
										        <input  class="form-control form-control-sm test" id="password6" 
												oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\.*)\./g, '$1');"
										        name="password6" maxlength="1" autocomplete="off" onkeyup="enableButton(this)" onkeydown="focusBack()">
										        <input  class="form-control form-control-sm test" type="hidden" id="orderId" 
										        name="orderId" >
										    </div>
										   <label class="time-otp ml-0 text-dark" for="" id="countdown" style="color: green;"></label>
										  <!-- <div class="text-center" id="countdown" style="color: green;"></div>-->
											<p id="resendOTPText">Didnâ€™t receive the code?  <a href="#" onclick="resendOTP()">Resend Code</a></p>
											
											<div class="error-msg" id="otpError" style="color:red"></div>
										    
											<div class="tip-wrap justify-content-start" style="width: 40%; margin-right: 0;">
										        <p class="mb-0" id="maskedMobileDisplay"></p>
										    </div>
											
											
											<div class="w-100 my-3 ">
											<input type="hidden" class="form-input" id="userMobile" name="userMobile" th:value="${session.mobile}"> 
											<input type="hidden" class="form-input" id="employerId" name="employerId" th:value="${session.id}"> 
											<input type="hidden" class="form-input" id="employerName" name="employerName" th:value="${session.username}"> 
								            <button class="btn btn-border-primary custom-width-backbtn" onclick="goBackToForm2()">Back</button>
								            <!--<button type="button" class="btn btn-primary custom-width-contbtn"  onclick="validateAndShowModal()" >Authenticate</button>-->
											<button type="button" class="btn btn-primary custom-width-contbtn" id="otpVerifyBtn"  onclick="verfyIssueVoucherOTP()" disabled>Authenticate</button>
												
										</div>
										   
										</div>	   
								</div>
                            </div>
							
                        </div>
                    </div>

                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->
        </div>
		

		<div class="lds-spinner" id="signinLoader" style="display: none">
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
		</div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->
	<!-- old Modal Confirm -->
	 
	    <!--<div class="modalView" id="ModalConfirm" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle">
	        <div class="modal-dialog modal-dialog-centered" role="document">
	        <div class="modal-content modal-bulk">
	            <div class="modal-top text-center">          
	            <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closePopup()">
	                <img src="img/modal-close.svg" alt="">
	            </button>        
	            <img src="img/modal-success.svg" alt="">
	            </div>
	            <div class="modal-bottom">
	                <span><strong>Organization Account Setup Successful!</strong></span>
	            </div>
	        </div>
	        </div>
	    </div>-->
		
		<div class="modalView" id="ModalConfirm">
		        <div class="modal-dialog modal-dialog-centered">
		            <div class="modal-content modal-bulk p-0">
		                <div class="modal-top text-center">
		                    <button type="button" class="close p-0"  data-dismiss="modal" onclick="closePopup()" aria-label="Close" style="right: 10px; top: 0;">
		                        <img src="img/modal-close.svg" alt="">
		                    </button>
		                    <img src="img/modal-success.svg" alt="">
		                </div>
		                <div class="modal-bottom">
		                    <span>Organization Account Setup Successful!</span>
		                </div>
		            </div>
		        </div>
		    </div>
			
			<div class="modalView" id="ModalConfirmDraft">
					        <div class="modal-dialog modal-dialog-centered">
					            <div class="modal-content modal-bulk p-0">
					                <div class="modal-top text-center">
					                    <button type="button" class="close p-0"  data-dismiss="modal"  aria-label="Close" style="right: 10px; top: 0;">
					                        <img src="img/modal-close.svg" alt="">
					                    </button>
					                    <img src="img/modal-success.svg" alt="">
					                </div>
					                <div class="modal-bottom">
					                    <span>Draft Saved Successfully</span>
					                </div>
					            </div>
					        </div>
					    </div>

	    <!-- Modal Reject -->
	    <div class="modal fade" id="ModalReject" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	        <div class="modal-dialog modal-dialog-centered" role="document">
	        <div class="modal-content modal-bulk">
	            <div class="modal-top text-center">          
	            <button type="button" class="close" data-dismiss="modal" aria-label="Close" >
	                <img src="img/modal-close.svg" alt="">
	            </button>        
	            <img src="img/modal-reject.svg" alt="">
	            </div>
	            <div class="modal-bottom">
	                <span class="required-star">Organization Account Setup Unsuccessful!</span>
	            </div>
	        </div>
	        </div>
	    </div>

		

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

	<!-- Bootstrap core JavaScript-->
	  <script src="vendor/jquery/jquery.min.js"></script>
	  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	  <!-- Core plugin JavaScript-->
	  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

	  <!-- Custom scripts for all pages-->
	  <script src="js/sb-admin-2.min.js"></script>

	  <!-- Page level plugins -->
	  <script src="vendor/datatables/jquery.dataTables.min.js"></script>
	  <script src="vendor/datatables/dataTables.bootstrap4.min.js"></script>

	  <!-- Page level custom scripts -->
	  <script src="js/demo/datatables-demo.js"></script>

	  <!-- <script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script> -->
	  <script type="text/javascript" src="js/slick/slick.min.js"></script>

	<!--<script type="text/javascript" src="cotodel-js/create-upi-voucher-issuance.js"></script>-->
	<script type="text/javascript" src="cotodel-js/sanitize-input.js"></script>
	<script type="text/javascript" src="cotodel-js/setting-company-account.js"></script>
	
	<style>
	.button-container {
	    display: flex;
	    justify-content: start; /* space between buttons */
	    align-items: center;    
		gap: 12px;        /* align vertically */
	}

	.custom-width-backbtn,
	.custom-width-contbtn {
	    min-width: 120px; /* or whatever size you need to make widths stable */
	}
	</style>
	<script>			document.addEventListener("DOMContentLoaded", function() {
	    let inputFields = document.querySelectorAll("#Form2 input:not([readonly])");

	    inputFields.forEach(input => {
	        input.addEventListener("input", handleInputIcon);

	        // If input already has value, add tick
	        if (input.value.trim() !== "") {
	            input.classList.add("input-with-static-icon");
	        }
	    });

	    // Check readonly fields separately
	    checkReadOnlyFields();
	});</script>
	<script> 	function convertToUppercase(inputElement) {
	    inputElement.value = inputElement.value.toUpperCase();
	}</script>
		
	<script>
			$('.responsive-content').slick({
			            dots: false,
			            infinite: false,
			            speed: 300,
			            slidesToShow: 4,
			            slidesToScroll: 1,
			            draggable: false,
			            responsive: [
			                {
			                    breakpoint: 1024,
			                    settings: {
			                        slidesToShow: 3,
			                        slidesToScroll: 1,
			                        infinite: true
			                    }
			                },
			                {
			                    breakpoint: 600,
			                    settings: {
			                        slidesToShow: 2,
			                        slidesToScroll: 1
			                    }
			                },
			                {
			                    breakpoint: 480,
			                    settings: {
			                        slidesToShow: 1,
			                        slidesToScroll: 1
			                    }
			                }
			            ]
			        });
		</script>
	<script type="text/javascript">

	$(document).ready(function(){
		
		  $('li.active').removeClass('active').removeAttr('aria-current'); 
		  $('a[href="' +'/Setting-Organization-Account"]').closest('li').addClass('active').attr('aria-current', 'page');   
		  
	   $(".innernav").click(function(){
	       $(".dropdownNav").addClass("active");
	   });
	});

	</script>
	


</body>

</html>